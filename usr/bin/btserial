#!/bin/sh

ALIASES=/proc/device-tree/aliases

case "$1" in
    ttyAMA0)
        UART=uart0
        ;;
    ttyAMA1)
        if [ -e /dev/ttyAMA0 ]; then
            exit 1
        fi
        UART=uart0
        ;;
    ttyS0)
        UART=uart1
        ;;
    *)
        exit 1
        ;;
esac

if cmp -s "$ALIASES"/"$UART" "$ALIASES"/serial0; then
    echo 0
elif cmp -s "$ALIASES"/"$UART" "$ALIASES"/serial1; then
    echo 1
else
    exit 1
fi
